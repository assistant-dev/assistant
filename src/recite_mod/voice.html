<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <title>Assistant</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="../css/style.css" rel="stylesheet" />
  </head>

  <body>
    <div class="ast-theme" id="app" data-theme="container">
      <button
        type="button"
        class="ast-theme"
        onclick="add_audio()"
        title="audio_title"
        data-theme="bprimary"
      >
        <loc>add</loc>
      </button>
      &nbsp;&nbsp;
      <button
        type="button"
        class="ast-theme"
        onclick="check()"
        title="savepic"
        data-theme="bprimary"
      >
        <loc>check</loc>
      </button>
      &nbsp;&nbsp;
      <select
        id="lang-sel"
        title="lang-sel"
        class="ast-theme"
        data-theme="small-select"
      >
        <option value="" class="loc">please_select</option>
        <option value="cn" class="loc">zh-CN</option>
        <option value="en" class="loc">en-US</option>
      </select>
      <input
        type="file"
        class="ast-theme"
        title="file_upload"
        id="file"
        multiple
        data-theme="hidden"
      />
    </div>
    <ol class="list-group list-group-sm list-group-numbered" id="lg">
      <input type="hidden" id="count" value="1" />
    </ol>
    <script src="../js/app.js"></script>
    <script src="../js/lang.js"></script>
    <script src="../js/ifasr_new.js"></script>
    <script src="../js/diff.js"></script>
    <script src="../js/theming.js"></script>
    <script src="../js/recorder.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      window.onload = function () {
        let firstRun = detect_first_run();
        if (firstRun) {
          var link = document.createElement("a");
          link.href = "../first_run.html";
          link.click();
        }
      };
      let cfg = JSON.parse(fc(config_path()));
      update(cfg.language);
      let path = localStorage.getItem("project_path");
      let json_mfs = JSON.parse(fc(path + "/project.json"));
      let recorderWorker = new Worker("../js/transformpcm.worker.js");
      let buffer = [];
      let audioContext = window.AudioContext || window.webkitAudioContext;
      navigator.getUserMedia =
        navigator.getUserMedia ||
        navigator.webkitGetUserMedia ||
        navigator.mozGetUserMedia ||
        navigator.msGetUserMedia;
      recorderWorker.onmessage = function (e) {
        buffer.push(...e.data.buffer);
      };
    </script>
  </body>
</html>
