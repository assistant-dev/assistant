<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <title>Assistant</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css"
    />
    <link href="../css/style.css" rel="stylesheet" />
  </head>

  <body>
    <div class="container" id="app">
      <button
        type="button"
        class="btn btn-primary"
        onclick="add_audio()"
        title="audio_title"
      >
        <loc>add</loc>
      </button>
      &nbsp;&nbsp;
      <button
        type="button"
        class="btn btn-primary"
        onclick="save()"
        title="savepic"
      >
        <loc>save</loc>
      </button>
      &nbsp;&nbsp;
      <select id="lang-sel" title="lang-sel" class="form-select form-select-sm">
        <option value="" class="loc">please_select</option>
        <option value="cn" class="loc">zh-CN</option>
        <option value="en" class="loc">en-US</option>
      </select>
      <input
        type="file"
        class="form-control form-control-sm hidden"
        title="file_upload"
        id="file"
        multiple
      />
    </div>
    <ol class="list-group list-group-sm list-group-numbered" id="lg">
      <input type="hidden" id="count" value="1" />
      <li
        class="list-group-item d-flex justify-content-between align-items-start"
      >
        <div class="ms-2 me-auto">
          <div class="fw-bold" id="fn_(count)">File Name</div>
          <span id="result_(count)">Result</span>
        </div>
        <div id="preshow_(count)">
          <button
            type="button"
            class="btn btn-light trans"
            onclick="refresh(count)"
            title="refresh"
          >
            <i class="bi bi-arrow-clockwise green"></i>
          </button>
          <button
            type="button"
            class="btn btn-light trans"
            onclick="delete_audio(count)"
            title="delete"
          >
            <i class="bi bi-trash red"></i>
          </button>
        </div>
        <div id="show_(count)">
          <button
            type="button"
            id="editbtn_(count)"
            class="btn btn-light trans"
            onclick="edit(count)"
            title="edit"
          >
            <i class="bi bi-pencil-fill green" id="edit_(count)"></i>
          </button>
          <button
            type="button"
            id="playbtn_(count)"
            class="btn btn-light trans"
            onclick="play(count)"
            title="play"
          >
            <i class="bi bi-file-earmark-play-fill green" id="play_(count)"></i>
          </button>
          <button
            type="button"
            id="upbtn_(count)"
            class="btn btn-light trans"
            onclick="up_func(count)"
            title="upbtn"
          >
            <i class="bi bi-caret-up-fill dblue" id="up_(count)"></i>
          </button>
          <button
            type="button"
            id="downbtn_(count)"
            class="btn btn-light trans"
            onclick="down_func(count)"
            title="downbtn"
          >
            <i class="bi bi-caret-down-fill dblue" id="down_(count)"></i>
          </button>
          <button
            type="button"
            id="trashbtn_(count)"
            class="btn btn-light trans"
            onclick="trash_func(count)"
            title="trashbtn"
          >
            <i class="bi bi-trash3-fill red" id="trashbin_(count)"></i>
          </button>
        </div>
      </li>
    </ol>
    <script src="../js/app.js"></script>
    <script src="../js/lang.js"></script>
    <script src="../js/ifasr_new.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      window.onload = function () {
        let firstRun = detect_first_run();
        if (firstRun) {
          var link = document.createElement("a");
          link.href = "first_run.html";
          link.click();
        }
      };
      let cfg = JSON.parse(fc(config_path()));
      update(cfg.language);
      let path = localStorage.getItem("project_path");
      let json_mfs = JSON.parse(fc(path + "/project.json"));
      function add_audio() {
        let file = $i("file");
        file.click();
        file.onchange = async function () {
          // get files
          let files = file.files;
          for (let key in files) {
            let file_path = files[key].path;
            let file_type = files[key].type; // MIME Types
            if (
              file_type == "audio/wav" ||
              file_type == "audio/mpeg" ||
              file_type == "audio/mp4"
            ) {
              // get the file name
              let file_name = files[key].name;
              // get the audio result
              let result = await ifasr(file_path, $i("lang-sel").value);
            }
          }
        };
      }
    </script>
  </body>
</html>
